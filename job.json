{
  "version": "2019_04_03",
  "metadata": {
    "name": "bertsum",
    "cluster": "eu2",
    "vc": "ipgsrch",
    "username": "yushi"
  },
  "environmentVariables": {
    "rootdir": "/philly/eu2/ipgsrch/yushi/bertsum",
    "modelpath": "/var/storage/shared/ipgsrch/sys/jobs/application_"
  },
  "resources": {
    "workers": {
      "type": "skuResource",
      "sku": "G1",
      "count": 1,
      "image": "phillyregistry.azurecr.io/philly/jobs/custom/pytorch:pytorch1.0.0-py36-vcr",
      "commandLine": "pip install --user pytorch_pretrained_bert tensorboardx multiprocess pyrouge && python $rootdir/src/train.py -mode test -bert_data_path $rootdir/bert_data/cnndm -model_path ${modelpath}1555486458178_7368/models -test_from ${modelpath}1555486458178_7368/models/model_step_50000.pt -tensorboard_log_dir $PHILLY_MODEL_DIRECTORY -temp_dir $PHILLY_JOB_DIRECTORY -bert_config_path $rootdir/bert_config_uncased_base.json -visible_gpus 0 -gpu_ranks 0 -batch_size 30000 -log_file $PHILLY_JOB_DIRECTORY/test.log -result_path $PHILLY_JOB_DIRECTORY/cnndm -block_trigram true -report_rouge false"
    }
  }
}
